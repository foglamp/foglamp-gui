<div class="columns">
  <div class="column">
    <form name="form" id="ngForm" (ngSubmit)="f.form.valid && saveConfiguration(f)" #f="ngForm" novalidate>
      <div *ngIf="categoryConfiguration != undefined">
        <ng-container *ngFor="let configItem of (categoryConfiguration.value | keys)">
          <div class="config-div" *ngIf="!configItem.value.readonly">
            <div class="field is-horizontal">
              <div class="field-label has-text-left">
                <label class="label tooltip is-tooltip-right" [attr.data-tooltip]="configItem.value.description">
                  {{configItem.value.key}}
                </label>
              </div>
              <div class="field-body">
                <div class="field">
                  <ng-container *ngIf="getConfigAttributeType(configItem.value.type) == 'BOOLEAN'">
                    <label class="checkbox">
                      <input type="checkbox" name='{{configItem.value.key}}' value="{{configItem.value.value}}" [ngModel]="configItem.value.value == 'true'">
                    </label>
                  </ng-container>
                  <input *ngIf="getConfigAttributeType(configItem.value.type) === 'TEXT'" name="{{configItem.value.key}}" class="input is-fullwidth is-small"
                    type="text" [(ngModel)]="configItem.value.value" [value]='configItem?.value?.value != undefined ? configItem?.value?.value : ""'
                    required />
                  <input *ngIf="getConfigAttributeType(configItem.value.type) === 'NUMBER'" name="{{configItem.value.key}}" type="number" [value]='configItem?.value?.value != undefined ? configItem?.value?.value : ""'
                    class="input is-fullwidth is-small" [(ngModel)]="configItem.value.value" appNumberOnly required/>

                  <textarea rows="3" *ngIf="getConfigAttributeType(configItem.value.type) === 'LONG_TEXT'" class="textarea is-fullwidth is-small"
                    name="{{configItem.value.key}}" [(ngModel)]="configItem.value.value" [value]='configItem?.value?.value != undefined ? configItem?.value?.value : ""'
                    type="text" required>{{configItem?.value?.value}}</textarea>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
        &nbsp;
        <div class="field">
          <div *ngIf="!f.valid" class="error">
            <sup>*</sup> Field can't left blank.
          </div>
          <div *ngIf="!isValidJson" class="error">
            Invalid JSON.
          </div>
          <div class="field is-horizontal">
            <div class="field-label has-text-left">
              <label class="label"></label>
            </div>
            <div class="field-body">
              <div class="field">
                <button *ngIf="useProxy == 'true'" id="vci-proxy" type="submit"  class="hidden button is-small is-link is-pulled-right">Save</button>
                <button *ngIf="useProxy != 'true'" id="vci" type="submit"  class="button is-small is-link is-pulled-left">Save</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
